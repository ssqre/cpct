<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Open Source Audio Library Project: aflibAudioSampleRateCvt Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>aflibAudioSampleRateCvt Class Reference</h1><!-- doxytag: class="aflibAudioSampleRateCvt" --><!-- doxytag: inherits="aflibAudio" -->Allows the <a class="el" href="classaflibConverter.html">aflibConverter</a> class to be used in an audio chain.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="aflibAudioSampleRateCvt_8h-source.html">aflibAudioSampleRateCvt.h</a>&gt;</code>
<p>
<p>Inheritance diagram for aflibAudioSampleRateCvt:
<p><center><img src="classaflibAudioSampleRateCvt.png" usemap="#aflibAudioSampleRateCvt_map" border="0" alt=""></center>
<map name="aflibAudioSampleRateCvt_map">
<area href="classaflibAudio.html" alt="aflibAudio" shape="rect" coords="82,56,236,80">
<area href="classaflibChain.html" alt="aflibChain" shape="rect" coords="0,0,154,24">
<area href="classaflibMemCache.html" alt="aflibMemCache" shape="rect" coords="164,0,318,24">
<area href="classaflibAudioPitch.html" alt="aflibAudioPitch" shape="rect" coords="82,168,236,192">
</map>
<a href="classaflibAudioSampleRateCvt-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#b44393c3a85f678a9310e0515c93c950">aflibAudioSampleRateCvt</a> (<a class="el" href="classaflibAudio.html">aflibAudio</a> &amp;audio, double factor, bool linear_interpolation=FALSE, bool high_quality=FALSE, bool filter_interpolation=FALSE)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Basic constructor to place object in a chain.  <a href="#b44393c3a85f678a9310e0515c93c950"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#6f46b9c4b636fb0c4f49bb040367669f">~aflibAudioSampleRateCvt</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#6f46b9c4b636fb0c4f49bb040367669f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#f0412b460fb719ee0bad845ab4cca905">setFactor</a> (double factor, double volume=1.0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the sample rate conversion factor.  <a href="#f0412b460fb719ee0bad845ab4cca905"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#2cafa2794dbc20355dd59496f382fdb4">setInputConfig</a> (const <a class="el" href="classaflibConfig.html">aflibConfig</a> &amp;cfg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the input and output audio data configuration of this object.  <a href="#2cafa2794dbc20355dd59496f382fdb4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#e8b60e34e5006bfa4910935d573009b3">getName</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the name of the derived class.  <a href="#e8b60e34e5006bfa4910935d573009b3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#9b6c4f2150540789fce5f5ea9a37c96e">compute_segment</a> (list&lt; <a class="el" href="classaflibData.html">aflibData</a> * &gt; &amp;data, long long position=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs the sample rate conversion of a segment of data.  <a href="#9b6c4f2150540789fce5f5ea9a37c96e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classaflibData.html">aflibData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#447fb73f1507fcb9b918a3bf737758b5">process</a> (<a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a> &amp;ret_status, long long position, int &amp;num_samples, bool free_memory=TRUE)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs some needed preprocessing before base class function is called.  <a href="#447fb73f1507fcb9b918a3bf737758b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#cbc8e7964bece79864eb69d34a882fc3">isDataSizeSupported</a> (<a class="el" href="aflib_8h.html#9b7ebf4f2e3c29a33224e4ff322f1b39">aflib_data_size</a> size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inform base class that this object only supports 16bit signed data.  <a href="#cbc8e7964bece79864eb69d34a882fc3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSampleRateCvt.html#32a2104377f7db823b937bea4df28bdd">isChannelsSupported</a> (int &amp;channels)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inform base class that this object only supports 16bit signed data.  <a href="#32a2104377f7db823b937bea4df28bdd"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Allows the <a class="el" href="classaflibConverter.html">aflibConverter</a> class to be used in an audio chain. 
<p>
This class is a wrapper class around the audio rate converter class (ie <a class="el" href="classaflibConverter.html">aflibConverter</a>). This class provides data to the converter class and keeps the audio data streaming. This is needed for file formats that don't have random access and for reading from devices. This class can use the <a class="el" href="classaflibMemCache.html">aflibMemCache</a> base class to perform audio caching. This class will provide sample rate conversion by virtually any factor as well as set the quality of the conversion. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b44393c3a85f678a9310e0515c93c950"></a><!-- doxytag: member="aflibAudioSampleRateCvt::aflibAudioSampleRateCvt" ref="b44393c3a85f678a9310e0515c93c950" args="(aflibAudio &amp;audio, double factor, bool linear_interpolation=FALSE, bool high_quality=FALSE, bool filter_interpolation=FALSE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibAudioSampleRateCvt::aflibAudioSampleRateCvt           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classaflibAudio.html">aflibAudio</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>audio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>linear_interpolation</em> = <code>FALSE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>high_quality</em> = <code>FALSE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>filter_interpolation</em> = <code>FALSE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Basic constructor to place object in a chain. 
<p>
Different sampling methods can be employed. By setting linear_interpolation to TRUE you are selecting the fastest and least quality method of sampling. With this set to TRUE the high_quality and filter_interpolation have no effect. This method just does a simple interpolation process when resampling occurs. Thus alias distoration can occur with this mode. To use high quality resampling the linear_interpolation flag should be set to FALSE. With linear_interpolation set to FALSE then the high_quality flag can be set. If it is set to FALSE then a small filter will be used. If TRUE a large filter will be used. The large filter is the best quality and also is the most CPU intensive. For most applications the small filter should be more than adequate. With the small and large filter a third parameter can be set, filter_interpolation. With filter_interpolation set then the filter coefficients used for both the small and large filtering will be interpolated as well. Defaults for the 3 filter parameters are set in the constructor which will create a small filter. This should be sufficient for most cases. For a description of factor see the setFactor member function description. 
</div>
</div><p>
<a class="anchor" name="6f46b9c4b636fb0c4f49bb040367669f"></a><!-- doxytag: member="aflibAudioSampleRateCvt::~aflibAudioSampleRateCvt" ref="6f46b9c4b636fb0c4f49bb040367669f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibAudioSampleRateCvt::~aflibAudioSampleRateCvt           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="f0412b460fb719ee0bad845ab4cca905"></a><!-- doxytag: member="aflibAudioSampleRateCvt::setFactor" ref="f0412b460fb719ee0bad845ab4cca905" args="(double factor, double volume=1.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSampleRateCvt::setFactor           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>volume</em> = <code>1.0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the sample rate conversion factor. 
<p>
This will set the sample rate conversion factor. Virtually any value, within reason, can be set. For instance to convert 22050 to 44100 a factor of 0.5 should be used. To convert 44100 to 22050 a factor of 2.0 should be used. This will change the factor that was set in the constructor. This function can also be used to change the final amplitude. This only applies to the small and large filters and not the linear mode. 
</div>
</div><p>
<a class="anchor" name="2cafa2794dbc20355dd59496f382fdb4"></a><!-- doxytag: member="aflibAudioSampleRateCvt::setInputConfig" ref="2cafa2794dbc20355dd59496f382fdb4" args="(const aflibConfig &amp;cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSampleRateCvt::setInputConfig           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classaflibConfig.html">aflibConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cfg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the input and output audio data configuration of this object. 
<p>
This function overrides the <a class="el" href="classaflibAudio.html">aflibAudio</a> base class function. It will change the output rate sample rate in the output audio configuration. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#dbf10949ce678ca8515b0fd842e7cced">aflibAudio</a>.
<p>
Reimplemented in <a class="el" href="classaflibAudioPitch.html#328fa1429325a2e561a0841492bbdee5">aflibAudioPitch</a>.
</div>
</div><p>
<a class="anchor" name="e8b60e34e5006bfa4910935d573009b3"></a><!-- doxytag: member="aflibAudioSampleRateCvt::getName" ref="e8b60e34e5006bfa4910935d573009b3" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* aflibAudioSampleRateCvt::getName           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the name of the derived class. 
<p>

<p>
Reimplemented from <a class="el" href="classaflibAudio.html#b759dee53fdc3dd5c705fe6c99b62abd">aflibAudio</a>.
<p>
Reimplemented in <a class="el" href="classaflibAudioPitch.html#c76b53f4afad25d52b409773f8857a97">aflibAudioPitch</a>.
</div>
</div><p>
<a class="anchor" name="9b6c4f2150540789fce5f5ea9a37c96e"></a><!-- doxytag: member="aflibAudioSampleRateCvt::compute_segment" ref="9b6c4f2150540789fce5f5ea9a37c96e" args="(list&lt; aflibData * &gt; &amp;data, long long position=-1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a> aflibAudioSampleRateCvt::compute_segment           </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classaflibData.html">aflibData</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&nbsp;</td>
          <td class="paramname"> <em>position</em> = <code>-1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Performs the sample rate conversion of a segment of data. 
<p>
This is the function that does all the work. It does many things. It takes an input buffer of data from its parent and adds it to the end of any previously unused data from the previous pass. This is done so that data can be streamed. The new data is sent to the converter. The convertered data is then saved to the output buffer to be returned to the next object. Any unused data is saved for the next pass. NOTE: one can disable the caching in the <a class="el" href="classaflibMemCache.html">aflibMemCache</a> base class, which is enabled by default for this class, and instead use a simple caching implemented in this function. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#d5362531d5963ffabef9edfb21b9237f">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="447fb73f1507fcb9b918a3bf737758b5"></a><!-- doxytag: member="aflibAudioSampleRateCvt::process" ref="447fb73f1507fcb9b918a3bf737758b5" args="(aflibStatus &amp;ret_status, long long position, int &amp;num_samples, bool free_memory=TRUE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classaflibData.html">aflibData</a> * aflibAudioSampleRateCvt::process           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ret_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&nbsp;</td>
          <td class="paramname"> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>num_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>free_memory</em> = <code>TRUE</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Performs some needed preprocessing before base class function is called. 
<p>
This function will take the position and number of samples requested and based on several factors will determine what position and number of samples is required from its parent. It will also try as best as possible to keep the data streaming. This is so it can read from a device or a format that does not have random access. When this function is done it will call the <a class="el" href="classaflibAudio.html">aflibAudio</a> base classes function of the same name. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#7c4923eb06591044d4a8f84a14f179ac">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="cbc8e7964bece79864eb69d34a882fc3"></a><!-- doxytag: member="aflibAudioSampleRateCvt::isDataSizeSupported" ref="cbc8e7964bece79864eb69d34a882fc3" args="(aflib_data_size size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aflibAudioSampleRateCvt::isDataSizeSupported           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aflib_8h.html#9b7ebf4f2e3c29a33224e4ff322f1b39">aflib_data_size</a>&nbsp;</td>
          <td class="paramname"> <em>size</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Inform base class that this object only supports 16bit signed data. 
<p>
This overrides the virtual function in the base class. This algorithm works only on 16 bit signed data. Base class must convert the data. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#dc6b9aa861f905cb34991df37448c670">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="32a2104377f7db823b937bea4df28bdd"></a><!-- doxytag: member="aflibAudioSampleRateCvt::isChannelsSupported" ref="32a2104377f7db823b937bea4df28bdd" args="(int &amp;channels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aflibAudioSampleRateCvt::isChannelsSupported           </td>
          <td>(</td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>channels</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Inform base class that this object only supports 16bit signed data. 
<p>
This overrides the virtual function in the base class. This algorithm works only on 16 bit signed data. Base class must convert the data. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#82910da2671d7eb0ac60e017fe077a38">aflibAudio</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="aflibAudioSampleRateCvt_8h-source.html">aflibAudioSampleRateCvt.h</a><li><a class="el" href="aflibAudioSampleRateCvt_8cc.html">aflibAudioSampleRateCvt.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sat Feb 23 13:56:37 2008 for Open Source Audio Library Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
