<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Open Source Audio Library Project: aflibAudioSpectrum Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>aflibAudioSpectrum Class Reference</h1><!-- doxytag: class="aflibAudioSpectrum" --><!-- doxytag: inherits="aflibAudio" -->Audio spectrum display and power meter class.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="aflibAudioSpectrum_8h-source.html">aflibAudioSpectrum.h</a>&gt;</code>
<p>
<p>Inheritance diagram for aflibAudioSpectrum:
<p><center><img src="classaflibAudioSpectrum.png" usemap="#aflibAudioSpectrum_map" border="0" alt=""></center>
<map name="aflibAudioSpectrum_map">
<area href="classaflibAudio.html" alt="aflibAudio" shape="rect" coords="66,56,188,80">
<area href="classaflibChain.html" alt="aflibChain" shape="rect" coords="0,0,122,24">
<area href="classaflibMemCache.html" alt="aflibMemCache" shape="rect" coords="132,0,254,24">
</map>
<a href="classaflibAudioSpectrum-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#bda8784ab621bd915459a2a01fd13739">aflibAudioSpectrum</a> (<a class="el" href="classaflibAudio.html">aflibAudio</a> &amp;audio)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constuctor with an audio parent.  <a href="#bda8784ab621bd915459a2a01fd13739"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#7027d6e6a6cafa76a4529558922a963a">~aflibAudioSpectrum</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#7027d6e6a6cafa76a4529558922a963a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#0c0eff1090445a7db03b1d7a0c34192a">setParameters</a> (int num_samples, int resp_per_sec, int channels)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets parameters for the audio spectrum class.  <a href="#0c0eff1090445a7db03b1d7a0c34192a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#df676ac7f672eb20b83f84c563e47215">setPowerMeterCallback</a> (<a class="el" href="aflibAudioSpectrum_8h.html#5c70d415050ae92f87daac1556a07d02">powermeter_callback</a> func_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables and disables power meter callback.  <a href="#df676ac7f672eb20b83f84c563e47215"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#8ecc02413e89565c79848dba486701d0">setAudioSpectrumCallback</a> (<a class="el" href="aflibAudioSpectrum_8h.html#5e75f607e2b3e337fdf3487561d4c940">spectrum_callback</a> func_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables and disables audio spectrum callback.  <a href="#8ecc02413e89565c79848dba486701d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#2cba13311525f0c8520798d6bc3f7d71">setInputConfig</a> (const <a class="el" href="classaflibConfig.html">aflibConfig</a> &amp;cfg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the input audio data configuration of an object.  <a href="#2cba13311525f0c8520798d6bc3f7d71"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#e9bcbcc663c99ef912034a909bdd78cb">compute_segment</a> (list&lt; <a class="el" href="classaflibData.html">aflibData</a> * &gt; &amp;data, long long position=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Work function, must be implemented by derived class.  <a href="#e9bcbcc663c99ef912034a909bdd78cb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#1097582a4dcac562c56eaf4b93e83bca">getName</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the name of the derived class.  <a href="#1097582a4dcac562c56eaf4b93e83bca"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#65d0097ba23e26f29c2f1b7835ce3ce2">setPowerMeter</a> (double *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#7fa81edfb1d721738139d9350bc3320b">setAudioSpectrum</a> (int, double *)</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#2b8688c138b38cfcdae6e2d45c29e10c">_pm</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibAudioSpectrum.html#f74af2e1ac2f31c2f3734f85577f8301">_spectrum</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Audio spectrum display and power meter class. 
<p>
This is a class that is derived from <a class="el" href="classaflibAudio.html">aflibAudio</a> so that it can be put in a chain. It allows the user to display a power meter (ie signal strength) or a spectrum display. The number of elements in the spectrum display is changeable. The user can have either or both at the same time. It also provides the ability to change the number of updates that occur. It also supports more than one channel. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="bda8784ab621bd915459a2a01fd13739"></a><!-- doxytag: member="aflibAudioSpectrum::aflibAudioSpectrum" ref="bda8784ab621bd915459a2a01fd13739" args="(aflibAudio &amp;audio)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibAudioSpectrum::aflibAudioSpectrum           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classaflibAudio.html">aflibAudio</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>audio</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constuctor with an audio parent. 
<p>
This will setup for 4 responses per second and 16 samples with 1 channel. No callbacks are enabled. 
</div>
</div><p>
<a class="anchor" name="7027d6e6a6cafa76a4529558922a963a"></a><!-- doxytag: member="aflibAudioSpectrum::~aflibAudioSpectrum" ref="7027d6e6a6cafa76a4529558922a963a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibAudioSpectrum::~aflibAudioSpectrum           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="0c0eff1090445a7db03b1d7a0c34192a"></a><!-- doxytag: member="aflibAudioSpectrum::setParameters" ref="0c0eff1090445a7db03b1d7a0c34192a" args="(int num_samples, int resp_per_sec, int channels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aflibAudioSpectrum::setParameters           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>resp_per_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>channels</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets parameters for the audio spectrum class. 
<p>
This allows the user to set the number of samples to be returned for the spectrum callback. It also determines the size of the fft that is done for both the spectrum and power meter callbacks. The number of samples must be a power of 2 upto 512. Another words, valid values are: 2, 4, 8, 16, 32, 64, 128, 256, 512. It also allows the user to set the number of times the callback functions will get called a second. There are limits to how large this value can be. It also depends on the sample rate of the audio stream. Good values would be 10 or less. If an invalid number of samples is set then FALSE will be returned. 
</div>
</div><p>
<a class="anchor" name="df676ac7f672eb20b83f84c563e47215"></a><!-- doxytag: member="aflibAudioSpectrum::setPowerMeterCallback" ref="df676ac7f672eb20b83f84c563e47215" args="(powermeter_callback func_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSpectrum::setPowerMeterCallback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aflibAudioSpectrum_8h.html#5c70d415050ae92f87daac1556a07d02">powermeter_callback</a>&nbsp;</td>
          <td class="paramname"> <em>func_ptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enables and disables power meter callback. 
<p>
This function allows one to register a callback that will get called whenever there is data processed showing what the power is. It will be called based on the responses per second that was set in the setParamters call. The user must register a function that receives a double: func(double val); The value passed will be in decibels. In order to turn off the callback pass NULL to this function. 
</div>
</div><p>
<a class="anchor" name="8ecc02413e89565c79848dba486701d0"></a><!-- doxytag: member="aflibAudioSpectrum::setAudioSpectrumCallback" ref="8ecc02413e89565c79848dba486701d0" args="(spectrum_callback func_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSpectrum::setAudioSpectrumCallback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aflibAudioSpectrum_8h.html#5e75f607e2b3e337fdf3487561d4c940">spectrum_callback</a>&nbsp;</td>
          <td class="paramname"> <em>func_ptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enables and disables audio spectrum callback. 
<p>
This function allows one to register a callback that will get called whenever there is data processed showing what the audio spectrum is. It will be called based on the responses per second that was set in the setParamters call. The user must register a function that receives an int and a double array: func(int array_size, *double array); The first value passed will be the size of the array passed. Users should not read beyond this size. The array values passed will be in decibels. When func is called users should copy the data if they wish to save it as the memory will go out of scope when func is exitted. In order to turn off the callback pass NULL to this function. 
</div>
</div><p>
<a class="anchor" name="2cba13311525f0c8520798d6bc3f7d71"></a><!-- doxytag: member="aflibAudioSpectrum::setInputConfig" ref="2cba13311525f0c8520798d6bc3f7d71" args="(const aflibConfig &amp;cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSpectrum::setInputConfig           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classaflibConfig.html">aflibConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cfg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the input audio data configuration of an object. 
<p>
This is a virtual function that derived classes can override if needed. It allows the caller to set the configuration of the audio data of an object. By default it saves the output audio configuration to be the same as the input data configuration that is passed in. This should be sufficient for most derived classes. For those classes that will have a change from the output to input config mapping then this function should be overriden and the output config processed and saved. 
<p>
Reimplemented from <a class="el" href="classaflibAudio.html#dbf10949ce678ca8515b0fd842e7cced">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="e9bcbcc663c99ef912034a909bdd78cb"></a><!-- doxytag: member="aflibAudioSpectrum::compute_segment" ref="e9bcbcc663c99ef912034a909bdd78cb" args="(list&lt; aflibData * &gt; &amp;data, long long position=-1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aflib_8h.html#71ba8d146ec8098b336803bb431e70ef">aflibStatus</a> aflibAudioSpectrum::compute_segment           </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classaflibData.html">aflibData</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&nbsp;</td>
          <td class="paramname"> <em>position</em> = <code>-1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Work function, must be implemented by derived class. 
<p>

<p>
Reimplemented from <a class="el" href="classaflibAudio.html#d5362531d5963ffabef9edfb21b9237f">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="1097582a4dcac562c56eaf4b93e83bca"></a><!-- doxytag: member="aflibAudioSpectrum::getName" ref="1097582a4dcac562c56eaf4b93e83bca" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* aflibAudioSpectrum::getName           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the name of the derived class. 
<p>

<p>
Reimplemented from <a class="el" href="classaflibAudio.html#b759dee53fdc3dd5c705fe6c99b62abd">aflibAudio</a>.
</div>
</div><p>
<a class="anchor" name="65d0097ba23e26f29c2f1b7835ce3ce2"></a><!-- doxytag: member="aflibAudioSpectrum::setPowerMeter" ref="65d0097ba23e26f29c2f1b7835ce3ce2" args="(double *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSpectrum::setPowerMeter           </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7fa81edfb1d721738139d9350bc3320b"></a><!-- doxytag: member="aflibAudioSpectrum::setAudioSpectrum" ref="7fa81edfb1d721738139d9350bc3320b" args="(int, double *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibAudioSpectrum::setAudioSpectrum           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="2b8688c138b38cfcdae6e2d45c29e10c"></a><!-- doxytag: member="aflibAudioSpectrum::_pm" ref="2b8688c138b38cfcdae6e2d45c29e10c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classaflibAudioSpectrum.html#2b8688c138b38cfcdae6e2d45c29e10c">aflibAudioSpectrum::_pm</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f74af2e1ac2f31c2f3734f85577f8301"></a><!-- doxytag: member="aflibAudioSpectrum::_spectrum" ref="f74af2e1ac2f31c2f3734f85577f8301" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classaflibAudioSpectrum.html#f74af2e1ac2f31c2f3734f85577f8301">aflibAudioSpectrum::_spectrum</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="aflibAudioSpectrum_8h-source.html">aflibAudioSpectrum.h</a><li><a class="el" href="aflibAudioSpectrum_8cc.html">aflibAudioSpectrum.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sat Feb 23 13:56:37 2008 for Open Source Audio Library Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
