<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Open Source Audio Library Project: aflibMemCache Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>aflibMemCache Class Reference</h1><!-- doxytag: class="aflibMemCache" -->Base class that implements audio data caching.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="aflibMemCache_8h-source.html">aflibMemCache.h</a>&gt;</code>
<p>
<p>Inheritance diagram for aflibMemCache:
<p><center><img src="classaflibMemCache.png" usemap="#aflibMemCache_map" border="0" alt=""></center>
<map name="aflibMemCache_map">
<area href="classaflibAudio.html" alt="aflibAudio" shape="rect" coords="0,56,154,80">
<area href="classaflibAudioBWFilter.html" alt="aflibAudioBWFilter" shape="rect" coords="164,112,318,136">
<area href="classaflibAudioConstantSrc.html" alt="aflibAudioConstantSrc" shape="rect" coords="164,168,318,192">
<area href="classaflibAudioEdit.html" alt="aflibAudioEdit" shape="rect" coords="164,224,318,248">
<area href="classaflibAudioFile.html" alt="aflibAudioFile" shape="rect" coords="164,280,318,304">
<area href="classaflibAudioMemoryInput.html" alt="aflibAudioMemoryInput" shape="rect" coords="164,336,318,360">
<area href="classaflibAudioMixer.html" alt="aflibAudioMixer" shape="rect" coords="164,392,318,416">
<area href="classaflibAudioRecorder.html" alt="aflibAudioRecorder" shape="rect" coords="164,448,318,472">
<area href="classaflibAudioSampleRateCvt.html" alt="aflibAudioSampleRateCvt" shape="rect" coords="164,504,318,528">
<area href="classaflibAudioSpectrum.html" alt="aflibAudioSpectrum" shape="rect" coords="164,560,318,584">
</map>
<a href="classaflibMemCache-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#d4e5b5cca52d199a3094038db15d7a6e">aflibMemCache</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#d4e5b5cca52d199a3094038db15d7a6e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#f291a53386bf26a13afa07d23f34e39d">~aflibMemCache</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor.  <a href="#f291a53386bf26a13afa07d23f34e39d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#a26d4630ca16389c4f437c635a101bb0">getCacheEnable</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current state of caching for this object.  <a href="#a26d4630ca16389c4f437c635a101bb0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#b3ee5236402e60cc59fd28133fe67907">setCacheEnable</a> (bool enable)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the state of caching for this object.  <a href="#b3ee5236402e60cc59fd28133fe67907"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#f8bc60aaa4cc31335dc62f33508ab63e">getCacheMax</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the maximum allowed size of the cache.  <a href="#f8bc60aaa4cc31335dc62f33508ab63e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#8cdcf59224eadc3fa43794eeb8f2299b">getCacheTotal</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the total size of all caches added together.  <a href="#8cdcf59224eadc3fa43794eeb8f2299b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">long long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#5cd1bcc9b0b390155e528ae451f4854c">getCacheLocal</a> () const</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the current size of the cache for this object only.  <a href="#5cd1bcc9b0b390155e528ae451f4854c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#f023986a8b0f66601b9653d5351c632d">clearCache</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Empties the cache for this object only.  <a href="#f023986a8b0f66601b9653d5351c632d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#8a95dac9b8189becb4485536504fd208">lookupData</a> (long long &amp;position, int &amp;num_samples)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaflibMemCache.html#91175d95de0977c65fb73c8a3e087e47">fillDataFromCache</a> (<a class="el" href="classaflibData.html">aflibData</a> &amp;data, long long &amp;position, int &amp;num_samples, long long orig_position, int orig_num_samples)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Base class that implements audio data caching. 
<p>
The purpose of this class is to provide a memory caching mechanism to those classes who whould benefit from this. It will store audio data into a buffer that it controls so that when audio data is reread for what ever purpose it will come from this cache instead of from the original source. This is beneficial for three reasons. 1) Some sources may not support backing up for old data. For instance an http stream comming over an internet connection. Some derived <a class="el" href="classaflibAudio.html">aflibAudio</a> objects need to back up over old data. For instance the sample rate converter class. It needs to operate on an old history of the data for best results. In order to save the complexity from each derived class we will implement caching here. 2) Reading audio data can be expensive from some sources. Reading from a disk can be slow and audio data from mp3s requires decoding. This will provide the capability to not have to reread again from the original source. 3) Some audio sources do not support random access. We can provide a limited random access capability for these sources by caching the audio data from the start of the file. Of course there are limitations with this.<p>
Most derived classes by default have caching disabled. To enable or disable caching one would call setCacheEnable. The environment variable AFLIB_CACHE_SIZE can be set to set the maximum amount of cache to use. The default is 1MB. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="d4e5b5cca52d199a3094038db15d7a6e"></a><!-- doxytag: member="aflibMemCache::aflibMemCache" ref="d4e5b5cca52d199a3094038db15d7a6e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibMemCache::aflibMemCache           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor. 
<p>

</div>
</div><p>
<a class="anchor" name="f291a53386bf26a13afa07d23f34e39d"></a><!-- doxytag: member="aflibMemCache::~aflibMemCache" ref="f291a53386bf26a13afa07d23f34e39d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">aflibMemCache::~aflibMemCache           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a26d4630ca16389c4f437c635a101bb0"></a><!-- doxytag: member="aflibMemCache::getCacheEnable" ref="a26d4630ca16389c4f437c635a101bb0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aflibMemCache::getCacheEnable           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the current state of caching for this object. 
<p>
Return the state of the cache. TRUE means caching is enabled. 
</div>
</div><p>
<a class="anchor" name="b3ee5236402e60cc59fd28133fe67907"></a><!-- doxytag: member="aflibMemCache::setCacheEnable" ref="b3ee5236402e60cc59fd28133fe67907" args="(bool enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibMemCache::setCacheEnable           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>enable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the state of caching for this object. 
<p>

</div>
</div><p>
<a class="anchor" name="f8bc60aaa4cc31335dc62f33508ab63e"></a><!-- doxytag: member="aflibMemCache::getCacheMax" ref="f8bc60aaa4cc31335dc62f33508ab63e" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long aflibMemCache::getCacheMax           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the maximum allowed size of the cache. 
<p>

</div>
</div><p>
<a class="anchor" name="8cdcf59224eadc3fa43794eeb8f2299b"></a><!-- doxytag: member="aflibMemCache::getCacheTotal" ref="8cdcf59224eadc3fa43794eeb8f2299b" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long aflibMemCache::getCacheTotal           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the total size of all caches added together. 
<p>

</div>
</div><p>
<a class="anchor" name="5cd1bcc9b0b390155e528ae451f4854c"></a><!-- doxytag: member="aflibMemCache::getCacheLocal" ref="5cd1bcc9b0b390155e528ae451f4854c" args="() const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long aflibMemCache::getCacheLocal           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the current size of the cache for this object only. 
<p>

</div>
</div><p>
<a class="anchor" name="f023986a8b0f66601b9653d5351c632d"></a><!-- doxytag: member="aflibMemCache::clearCache" ref="f023986a8b0f66601b9653d5351c632d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibMemCache::clearCache           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Empties the cache for this object only. 
<p>

</div>
</div><p>
<a class="anchor" name="8a95dac9b8189becb4485536504fd208"></a><!-- doxytag: member="aflibMemCache::lookupData" ref="8a95dac9b8189becb4485536504fd208" args="(long long &amp;position, int &amp;num_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibMemCache::lookupData           </td>
          <td>(</td>
          <td class="paramtype">long long &amp;&nbsp;</td>
          <td class="paramname"> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>num_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="91175d95de0977c65fb73c8a3e087e47"></a><!-- doxytag: member="aflibMemCache::fillDataFromCache" ref="91175d95de0977c65fb73c8a3e087e47" args="(aflibData &amp;data, long long &amp;position, int &amp;num_samples, long long orig_position, int orig_num_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aflibMemCache::fillDataFromCache           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classaflibData.html">aflibData</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long &amp;&nbsp;</td>
          <td class="paramname"> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>num_samples</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long long&nbsp;</td>
          <td class="paramname"> <em>orig_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>orig_num_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="aflibMemCache_8h-source.html">aflibMemCache.h</a><li><a class="el" href="aflibMemCache_8cc.html">aflibMemCache.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sat Feb 23 13:56:37 2008 for Open Source Audio Library Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
